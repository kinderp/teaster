# Before running docker-compuse up
#
# docker network create -d bridge teaster_net
#

version: '3'
services:

  rabbit:
    container_name: rabbit
    ports:
        - "15672:15672"
        - "5672:5672"
    networks:
        - teaster_net
    image: rabbitmq:3.6-management
    volumes:
        - /mnt/rabbit:/var/lib/rabbitmq
    
  teaster:
    container_name: teaster
    networks:
        - teaster_net
    image: teaster
    build:
      context: .
      dockerfile: Dockerfile_teaster
    volumes:
        - ~/dev/teaster:/myapp
    ports:
        - "5000:5000"

  #  producer:
  #    container_name: producer
  #    networks:
  #        - teaster_net
  #    image: producer
  #    build:
  #      context: .
  #      dockerfile: Dockerfile_producer
  #    volumes:
  #        - ~/dev/teaster:/myapp
  #    
  #

  consumer:
    container_name: consumer
    networks:
        - teaster_net
    image: consumer
    build:
      context: .
      dockerfile: Dockerfile_consumer
    volumes:
        - ~/dev/teaster:/myapp
 

networks:
  teaster_net:
    external: true

